package uet.barrydevp.towerdefense.Sprite;import javafx.event.Event;import javafx.geometry.Point2D;import javafx.scene.image.Image;import javafx.scene.image.ImageView;import javafx.scene.input.MouseEvent;import javafx.scene.layout.Pane;import uet.barrydevp.towerdefense.Game.GameManager;import uet.barrydevp.towerdefense.Game.GameSpriteManager;import uet.barrydevp.towerdefense.Tower.BaseTower;import uet.barrydevp.towerdefense.Tower.SingleCanon;import uet.barrydevp.towerdefense.Tower.SingleMissile;import java.util.ArrayList;public class RootTower extends Pane {    private ImageView rootTower;    private ArrayList<ImageView> listTower;    private Point2D location;    private BaseTower curTower;    private boolean isVisible;    public RootTower(Point2D location) {        this.location = location.add(32, 32);        this.isVisible = false;        this.listTower = new ArrayList<>();        relocate(location.getX(), location.getY());        init();        rootTower = new ImageView(GameSpriteManager.getInstance().rootTowerImage);        rootTower.addEventFilter(MouseEvent.MOUSE_CLICKED, e -> {//            System.out.println(e);            if(listTower != null) {                isVisible = !isVisible;                for(int i = 0; i < listTower.size(); i++) {                    listTower.get(i).setVisible(isVisible);                }            }        });        getChildren().add(rootTower);    }    public void init() {        GameSpriteManager instance = GameSpriteManager.getInstance();        ImageView singleCanonView = createTower(instance.singleCanonImage, new Point2D(-20, -20));        singleCanonView.addEventFilter(MouseEvent.MOUSE_CLICKED, e -> {            BaseTower tower = SingleCanon.creatTower(location);            GameManager.getInstance().getTowerArray().add(tower);            curTower = tower;            getChildren().removeAll(listTower);        });        listTower.add(singleCanonView);        ImageView singleMissileView = createTower(instance.singleMissileImage, new Point2D(40, -20));        singleMissileView.addEventFilter(MouseEvent.MOUSE_CLICKED, e -> {            BaseTower tower = SingleMissile.creatTower(location);            GameManager.getInstance().getTowerArray().add(tower);            curTower = tower;            getChildren().removeAll(listTower);        });        listTower.add(singleMissileView);    }    public ImageView createTower(Image image, Point2D pos) {        ImageView towerView = new ImageView(image);        towerView.setFitHeight(42);        towerView.setFitWidth(42);        towerView.setVisible(false);        towerView.relocate(pos.getX(), pos.getY());        getChildren().add(towerView);        return towerView;    }}